<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lamumu Jump</title>
<style>
body, html { margin:0; padding:0; overflow:hidden; font-family: 'Poppins', sans-serif; background: linear-gradient(to bottom, #87ceeb, #e0f7fa); }
canvas { display:block; }
#title { position:absolute; top:20px; left:50%; transform:translateX(-50%); font-size:36px; font-weight:bold; color:white; text-shadow:0 0 10px #ff69b4, 0 0 20px #ff69b4; }
#overlay { position:absolute; top:0; left:0; width:100%; height:100%; display:grid; place-items:center; background: rgba(0,0,0,0.5); color:white; font-size:36px; display:none; text-align:center; }
#restart { position:absolute; top:55%; left:50%; transform:translate(-50%,-50%); font-size:24px; padding:12px 24px; background:#ff69b4; border:none; border-radius:12px; color:white; cursor:pointer; display:none; box-shadow:0 4px 10px rgba(0,0,0,0.3); }
</style>
</head>
<body>
<div id="title">Lamumu Jump üêÑ</div>
<div id="overlay"></div>
<button id="restart">Restart</button>
<canvas id="gameCanvas"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;let cow = {x:canvas.width/2, y:canvas.height/2, w:50, h:50, vy:0, onGround:false}; let gravity = 0.5, jumpPower = -10; let platforms = [], hay = [], lives=3, score=0; let targetX = null, gameOver=false;

const overlay = document.getElementById('overlay'); const restartBtn = document.getElementById('restart');

function rand(a,b){ return Math.random()*(b-a)+a; }

function resetGame(){ cow = {x:canvas.width/2, y:canvas.height/2, w:50, h:50, vy:0, onGround:false}; platforms=[]; hay=[]; lives=3; score=0; targetX=null; gameOver=false; overlay.style.display='none'; restartBtn.style.display='none'; for(let i=0;i<7;i++){ let w=rand(100,200); let x=rand(50,canvas.width-w-50); let y=canvas.height - i*120; platforms.push({x,y,w,h:12}); if(Math.random()<0.3) hay.push({x:x+w/2-7, y:y-22, r:6, taken:false}); } }

function drawCow(){ ctx.fillStyle='white'; ctx.beginPath(); ctx.arc(cow.x,cow.y,25,0,Math.PI*2); ctx.fill(); ctx.fillStyle='black'; ctx.fillRect(cow.x-15,cow.y-10,10,10); ctx.fillRect(cow.x+5,cow.y-10,10,10); }

function drawPlatforms(){ ctx.fillStyle='#228B22'; platforms.forEach(p=>ctx.fillRect(p.x,p.y,p.w,p.h)); }

function drawHay(){ ctx.fillStyle='#f4d06f'; hay.forEach(h=>{ if(!h.taken) ctx.fillRect(h.x-7,h.y-6,14,12); }); }

function update(){ if(gameOver) return; cow.vy += gravity; cow.y += cow.vy;

if(targetX!==null){ let dx = targetX-cow.x; cow.x += dx*0.12; if(Math.abs(dx)<2) targetX=null; }

cow.onGround=false; platforms.forEach(p=>{ if(cow.x + cow.w/2 > p.x && cow.x - cow.w/2 < p.x + p.w){ if(cow.y + cow.h/2 >= p.y && cow.y + cow.h/2 <= p.y + p.h + cow.vy){ cow.y = p.y - cow.h/2; cow.vy=0; cow.onGround=true; } } });

hay.forEach(h=>{ if(!h.taken){ let dx=cow.x-(h.x+7), dy=cow.y-(h.y+6); if(dxdx+dydy<25*25){ h.taken=true; score+=2; playCollect(); } } });

platforms.forEach(p=>p.y+=1.5); hay.forEach(h=>h.y+=1.5);

if(cow.y>canvas.height+50){ lives--; if(lives<=0){ endGame(); } else { cow.y=50; cow.vy=0; } }

if(platforms[0].y>canvas.height){ platforms.shift(); let w=rand(100,200); let x=rand(50,canvas.width-w-50); let y=platforms[platforms.length-1].y-120; platforms.push({x,y,w,h:12}); if(Math.random()<0.3) hay.push({x:x+w/2-7, y:y-22, r:6, taken:false}); } }

function draw(){ ctx.clearRect(0,0,canvas.width,canvas.height); drawPlatforms(); drawHay(); drawCow(); }

function loop(){ update(); draw(); requestAnimationFrame(loop); }

function playJump(){ let a=new Audio('https://www.fesliyanstudios.com/play-mp3/387'); a.play(); } function playCollect(){ let a=new Audio('https://www.fesliyanstudios.com/play-mp3/669'); a.play(); }

function jump(clientX){ if(cow.onGround){ cow.vy=jumpPower; cow.onGround=false; playJump(); } if(clientX!==undefined) targetX=clientX; }

function endGame(){ gameOver=true; overlay.style.display='grid'; overlay.textContent='Game Over üêÑ\nScore: '+score; restartBtn.style.display='block'; }

window.addEventListener('keydown', e=>{ if(e.code==='Space') jump(); }); window.addEventListener('pointerdown', e=>jump(e.clientX)); restartBtn.addEventListener('click', ()=>{ resetGame(); });

resetGame(); loop(); </script>

</body>
</html>
    // Input ‚Äî on tap/click player jumps and cow moves horizontally toward tap
    function handleTap(clientX){
      const rect = canvas.getBoundingClientRect();
      const x = (clientX - rect.left);
      // set horizontal target
      targetX = Math.max(20, Math.min(canvas.width - 20, x));
      // jump
      if(cow.onGround) { cow.vy = JUMP_V; cow.onGround=false; playJumpSound(); }
      else if(cow.vy > JUMP_V*0.4) { cow.vy += -1.6; playJumpSound(); }
    }

    // event listeners
    window.addEventListener('pointerdown', (e)=>{
      e.preventDefault();
      if(state === 'menu') start();
      else if(state === 'gameover') start();
      else if(state === 'paused') { state='playing'; btnPause.textContent='Pause'; return; }
      handleTap(e.clientX);
    });
    window.addEventListener('keydown', (e)=>{
      if(e.code==='Space' || e.code==='ArrowUp'){ e.preventDefault(); if(state==='menu') start(); else if(state==='gameover') start(); handleTap(window.innerWidth/2); }
      if(e.code==='KeyP'){ togglePause(); }
    });

    btnStart.addEventListener('click', start);
    btnRetry.addEventListener('click', start);
    btnPause.addEventListener('click', togglePause);

    function togglePause(){ if(state==='playing'){ state='paused'; btnPause.textContent='Resume'; showOverlay('Paused','Press Resume or tap the canvas to continue'); } else if(state==='paused'){ state='playing'; btnPause.textContent='Pause'; hideOverlay(); } }

    function start(){ resetWorld(); state='playing'; hideOverlay(); }

    function gameOver(){ state='gameover'; showOverlay('Game Over', `Score: ${score} ‚Ä¢ High: ${hiscore}`); if(score>hiscore){ hiscore = score; localStorage.setItem('lamumu_hiscore', String(hiscore)); hiEl.textContent = hiscore; } }

    function showOverlay(title, text){ overlay.innerHTML = `<div class="message"><h2>${title}</h2><div class="small">${text}</div></div>`; overlay.style.pointerEvents='auto'; }
    function hideOverlay(){ overlay.innerHTML=''; overlay.style.pointerEvents='none'; }

    function updateScore(){ scoreEl.textContent = score; }

    function update(dt){ if(state!=='playing') return; tick++;
      // difficulty
      if(score>0 && score%20 === 0) speed = 1.6 + Math.min(2.2, score/60);

      // move environment
      platforms.forEach(p=>p.y += speed);
      hay.forEach(h=>h.y += speed);
      clouds.forEach(c=>{ c.x += c.s; if(c.x - c.w > canvas.width) c.x = -c.w; });

      // recycle platforms
      for(let i=platforms.length-1;i>=0;i--){ if(platforms[i].y > canvas.height + 30){ platforms.splice(i,1); spawnRowAtTop(); } }
      for(let i=hay.length-1;i>=0;i--){ if(hay[i].y > canvas.height + 30) hay.splice(i,1); }

      // physics
      cow.vy = Math.min(MAX_FALL, cow.vy + GRAVITY);
      cow.y += cow.vy;

      // horizontal movement toward targetX with easing
      if(targetX !== null){ const dx = targetX - cow.x; cow.vx = dx * 0.12; cow.x += cow.vx; if(Math.abs(dx) < 2) { cow.vx = 0; targetX = null; } }
      // subtle drift
      cow.x += Math.sin(tick/60) * 0.2;

      // platform collision when falling
      if(cow.vy >= 0){
        for(const p of platforms){
          const withinX = cow.x + cow.w*0.4 > p.x && cow.x - cow.w*0.4 < p.x + p.w;
          const feetY = cow.y + cow.h*0.5;
          if(withinX && feetY >= p.y && feetY <= p.y + p.h + Math.max(1, cow.vy)){
            cow.y = p.y - cow.h*0.5; cow.vy = 0; if(!cow.onGround){ cow.onGround = true; if(cow.lastId !== p.id){ score++; updateScore(); cow.lastId = p.id; playLandSound(); } } break;
          }
        }
      } else { cow.onGround = false; }

      // collect hay
      for(const h of hay){ if(!h.taken){ const dx = cow.x - h.x; const dy = cow.y - h.y; if(dx*dx + dy*dy < (cow.w*0.35 + h.r)*(cow.w*0.35 + h.r)){ h.taken = true; score += 2; updateScore(); playCollect(); } } }

      // lose if fall below or go too high
      if(cow.y - cow.h*0.5 > canvas.height + 12 || cow.y + cow.h*0.5 < -100) { gameOver(); }
    }

    // Drawing helpers
    function roundRect(ctx,x,y,w,h,r){ ctx.beginPath(); ctx.moveTo(x+r,y); ctx.arcTo(x+w,y,x+w,y+h,r); ctx.arcTo(x+w,y+h,x,y+h,r); ctx.arcTo(x,y+h,x,y,r); ctx.arcTo(x,y,x+w,y,r); ctx.closePath(); }
    function ellipse(ctx,x,y,rx,ry){ ctx.beginPath(); ctx.ellipse(x,y,rx,ry,0,0,Math.PI*2); ctx.closePath(); }

    function draw(){
      // clear
      ctx.clearRect(0,0,canvas.width,canvas.height);
      // subtle background
      const g = ctx.createLinearGradient(0,0,0,canvas.height); g.addColorStop(0,'#e7fbff'); g.addColorStop(0.35,'#dff6ff'); g.addColorStop(1,'#bfe9ff'); ctx.fillStyle = g; ctx.fillRect(0,0,canvas.width,canvas.height);

      // clouds
      clouds.forEach(c=>{ ctx.fillStyle='rgba(255,255,255,0.9)'; roundRect(ctx,c.x,c.y,c.w,c.h,12); ctx.fill(); });

      // platforms
      platforms.forEach(p=>{
        const grad = ctx.createLinearGradient(p.x,p.y,p.x,p.y+p.h); grad.addColorStop(0,'#7bd389'); grad.addColorStop(1,'#4caf50'); ctx.fillStyle = grad; roundRect(ctx,p.x,p.y,p.w,p.h,8); ctx.fill();
      });

      // hay
      hay.forEach(h=>{ if(h.taken) return; ctx.save(); ctx.translate(h.x,h.y); roundRect(ctx,-7,-6,14,12,3); ctx.fillStyle='#f4d06f'; ctx.fill(); ctx.restore(); });

      // cow
      ctx.save(); ctx.translate(cow.x, cow.y);
      // shadow
      ctx.fillStyle='rgba(0,0,0,0.18)'; ellipse(ctx,0,cow.h*0.6,cow.w*0.6,6); ctx.fill();
      // body
      ctx.fillStyle='#ffffff'; roundRect(ctx,-cow.w*0.5,-cow.h*0.4,cow.w*0.9,cow.h*0.65,8); ctx.fill();
      // spots
      ctx.fillStyle='#2d2a2a'; ellipse(ctx,-10,-6,9,6); ctx.fill(); ellipse(ctx,6,4,7,5); ctx.fill();
      // head
      roundRect(ctx,cow.w*0.15,-cow.h*0.5,18,16,6); ctx.fillStyle='#fff'; ctx.fill();
      // eyes & muzzle
      ctx.fillStyle='#000'; ellipse(ctx,cow.w*0.15+6,-cow.h*0.5+7,1.8,1.8); ctx.fill(); ellipse(ctx,cow.w*0.15+12,-cow.h*0.5+7,1.8,1.8); ctx.fill();
      ctx.fillStyle='#ffb4b4'; roundRect(ctx,cow.w*0.15+4,-cow.h*0.5+11,14,7,4); ctx.fill();
      // legs
      ctx.fillStyle='#fff'; roundRect(ctx,-cow.w*0.24,cow.h*0.2,6,12,3); ctx.fill(); roundRect(ctx,-cow.w*0.04,cow.h*0.2,6,12,3); ctx.fill(); roundRect(ctx,cow.w*0.16,cow.h*0.2,6,12,3); ctx.fill();
      ctx.restore();

      // overlay messages
      if(state==='menu') drawCenterOverlay('Lamumu Jump','Tap anywhere to jump and guide the cow');
      if(state==='paused') drawCenterOverlay('Paused','Tap to resume');
      if(state==='gameover') drawCenterOverlay('Game Over',`Score: ${score}`);
    }

    function drawCenterOverlay(t,sub){
      ctx.save(); ctx.fillStyle='rgba(255,255,255,0.95)'; const w = canvas.width*0.86; const h = 84; const x = (canvas.width-w)/2; const y = 36; roundRect(ctx,x,y,w,h,14); ctx.fill(); ctx.fillStyle='#071233'; ctx.font='22px system-ui'; ctx.textAlign='center'; ctx.fillText(t, canvas.width*0.5, y+36); ctx.font='14px system-ui'; ctx.fillText(sub, canvas.width*0.5, y+58); ctx.restore(); }

    // main loop
    let last = performance.now(); function loop(now){ const dt = (now-last)/16.67; last = now; update(dt); draw(); requestAnimationFrame(loop); }
    resetWorld(); requestAnimationFrame(loop);

    // helper: ensure audio resume on first user gesture
    function resumeAudio(){ if(!audio) return; if(audio.state==='suspended') audio.resume(); window.removeEventListener('pointerdown', resumeAudio); window.removeEventListener('keydown', resumeAudio); }
    window.addEventListener('pointerdown', resumeAudio); window.addEventListener('keydown', resumeAudio);

    // small UI defaults
    btnPause.textContent = 'Pause'; btnRetry.textContent='Retry';
    showOverlay('Lamumu Jump','Tap to start ‚Äî cow will move horizontally toward your tap');

  })();
  </script></body>
</html>
